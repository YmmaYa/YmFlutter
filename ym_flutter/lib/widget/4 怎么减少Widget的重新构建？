
â€¼ï¸â€¼ï¸â€¼ï¸ æ€ä¹ˆå‡å°‘Widgetçš„é‡æ–°æ„å»ºï¼Ÿ

ä¸€ã€åŸºç¡€ä¼˜åŒ–ç­–ç•¥
    âœ… 1. ä½¿ç”¨ const æ„é€ å‡½æ•°
            ğŸ¯å‡å°‘ç›¸åŒé…ç½® Widget çš„é‡å¤å®ä¾‹åŒ–
    âœ… 2. æ‹†åˆ†å¤§ Widget
            ğŸ¯å°†é¢‘ç¹å˜åŒ–çš„éƒ¨åˆ†ç‹¬ç«‹
    âœ… 3. ä½¿ç”¨ Builder éš”ç¦»é‡å»ºèŒƒå›´
            Builder(
              builder: (innerContext) {
                // åªæœ‰è¿™éƒ¨åˆ†ä¼šé‡å»º
                return Text('${DateTime.now()}');
              },
            )

äºŒã€çŠ¶æ€ç®¡ç†ä¼˜åŒ–
    âœ…1. ç²¾å‡†æ§åˆ¶ setState
            //åªæ›´æ–°éœ€è¦å˜åŒ–çš„å­æ ‘
            void updateCounter() {
              setState(() {
                _counter++;
                // é¿å…åœ¨æ­¤å¤„è°ƒç”¨å…¶ä»–æ— å…³å˜é‡çš„æ›´æ–°
              });
            }
    âœ…2. ä½¿ç”¨ ValueNotifier + ValueListenableBuilder
            final counter = ValueNotifier(0);
            ValueListenableBuilder<int>(
              valueListenable: counter,
              builder: (_, value, __) => Text('$value'),
            )
    âœ…3. Provider é€‰æ‹©æ€§æ¶ˆè´¹
            //åªç›‘å¬éœ€è¦çš„å±æ€§
            Consumer<MyModel>(
              builder: (_, model, __) => Text(model.username),
            )
ä¸‰ã€é«˜çº§æ¸²æŸ“æ§åˆ¶
    âœ…1. RepaintBoundary éš”ç¦»é‡ç»˜
            RepaintBoundary(
              child: MyAnimatedWidget(), // åŠ¨ç”»å†…å®¹ç‹¬ç«‹é‡ç»˜
            )
    âœ…2. AutomaticKeepAlive ä¿æŒçŠ¶æ€
            class _TabState extends State<MyTab> with AutomaticKeepAliveClientMixin {
              @override
              bool get wantKeepAlive => true; // ä¿æŒä¸è¢«é”€æ¯
            }
å››ã€åˆ—è¡¨ä¼˜åŒ–æŠ€å·§
    âœ…1. ListView.builder æ‡’åŠ è½½
        ListView.builder(
          itemCount: 1000,
          itemBuilder: (_, index) => ListItem(index), // åªæ„å»ºå¯è§é¡¹
        )
    âœ…2. ä½¿ç”¨ itemExtent å›ºå®šé«˜åº¦
        ListView.builder(
          itemExtent: 56.0, // æ˜ç¡®itemé«˜åº¦æå‡æ€§èƒ½
          // ...
        )
    âœ…3. addAutomaticKeepAlives æ§åˆ¶
        ListView.builder(
          addAutomaticKeepAlives: false, // å¯¹ä¸éœ€è¦ä¿æŒçŠ¶æ€çš„åˆ—è¡¨ç¦ç”¨
          // ...
        )
äº”ã€åŠ¨ç”»ä¼˜åŒ–
    âœ…1. TickerProvider ç²¾ç¡®æ§åˆ¶
        class _MyState extends State<MyWidget> with SingleTickerProviderStateMixin {
          late final _controller = AnimationController(
            vsync: this, // ç»‘å®šåˆ°å½“å‰widgetç”Ÿå‘½å‘¨æœŸ
            duration: const Duration(seconds: 1),
          );
        }
    âœ…2. ä½¿ç”¨ AnimatedBuilder å±€éƒ¨æ›´æ–°
        AnimatedBuilder(
          animation: _animation,
          builder: (_, child) => Transform.rotate(
            angle: _animation.value,
            child: child, // å¤ç”¨é™æ€å­æ ‘
          ),
          child: const Icon(Icons.star), // ä¸ä¼šé‡å»º
        )
å…­ã€æ·±åº¦ä¼˜åŒ–æ–¹æ¡ˆ
    âœ…1. ProxyWidget ä»£ç†æ›´æ–°
        class MyProxy extends ProxyWidget {
          const MyProxy({required this.child}) : super(child: child);

          @override
          bool updateShouldNotify(covariant ProxyWidget oldWidget) => false; // é˜»æ­¢æ›´æ–°ä¼ é€’
        }
    âœ…2. è‡ªå®šä¹‰ Element æ§åˆ¶æ›´æ–°
        class MyElement extends ComponentElement {
          @override
          void performRebuild() {
            // è‡ªå®šä¹‰é‡å»ºé€»è¾‘
            if (_needsUpdate) super.performRebuild();
          }
        }
ä¸ƒã€å·¥å…·è¾…åŠ©
    âœ…1. ä½¿ç”¨ DevTools åˆ†æ
        ** æŸ¥çœ‹ Widget é‡å»ºæ¬¡æ•°
        ** è¯†åˆ«ä¸å¿…è¦çš„é‡å»º
    âœ…2. é‡å†™ == æ“ä½œç¬¦
            class MyWidget extends Widget {
              final String key;

              @override
              bool operator ==(other) =>
                  identical(this, other) ||
                  (other is MyWidget && other.key == key);

              @override
              int get hashCode => key.hashCode;
            }
å…«ã€æ¶æ„çº§ä¼˜åŒ–
    âœ…1.BLoC æ¨¡å¼ç²¾å‡†æ›´æ–°
            BlocBuilder<MyBloc, MyState>(
              buildWhen: (prev, curr) => prev.value != curr.value, // æ¡ä»¶é‡å»º
              builder: (_, state) => Text('${state.value}'),
            )
    âœ…2.ä½¿ç”¨ Stream + distinct
            stream.distinct().listen((data) {
              // åªæœ‰æ•°æ®çœŸæ­£å˜åŒ–æ—¶æ‰å¤„ç†
            });
    âœ…3.é€‰æ‹©æ€§ç»§æ‰¿ InheritedWidget
            class MyData extends InheritedWidget {
              final int counter;

              @override
              bool updateShouldNotify(MyData old) =>
                  counter != old.counter; // ä»…counterå˜åŒ–æ—¶é€šçŸ¥
            }

âš ï¸ æœ€ä½³å®è·µæ€»ç»“âœˆï¸
åœºæ™¯                 æ¨èæ–¹æ¡ˆ	                    æ€§èƒ½æå‡å¹…åº¦
é™æ€å†…å®¹	            const æ„é€ å‡½æ•°	            â­â­â­â­
å±€éƒ¨çŠ¶æ€æ›´æ–°	        ValueListenableBuilder	    â­â­â­
åˆ—è¡¨æ¸²æŸ“	            ListView.builder + å›ºå®šé«˜åº¦	â­â­â­â­
å¤æ‚åŠ¨ç”»	            RepaintBoundary	            â­â­
å…¨å±€çŠ¶æ€ç®¡ç†	        Provider + select	        â­â­â­â­
ä¿æŒé¡µé¢çŠ¶æ€	        AutomaticKeepAlive	        â­â­â­

âš ï¸ å…³é”®åŸåˆ™âœˆï¸ï¼š
ï¼ˆ1ï¼‰æœ€å°åŒ–é‡å»ºèŒƒå›´ - åªæ›´æ–°å¿…é¡»å˜åŒ–çš„ Widget
ï¼ˆ2ï¼‰é¢„è®¡ç®—ä¸ç¼“å­˜ - åœ¨ build å¤–éƒ¨å¤„ç†å¤æ‚é€»è¾‘
ï¼ˆ3ï¼‰åˆç†ä½¿ç”¨ç¼“å­˜ - å¯¹æ˜‚è´µ Widget ä½¿ç”¨ Memoization
ï¼ˆ4ï¼‰ç›‘æ§å·¥å…·è¾…åŠ© - ç”¨ DevTools æŒç»­ä¼˜åŒ–
é€šè¿‡ç»„åˆè¿™äº›ç­–ç•¥ï¼Œå¯å°† Flutter åº”ç”¨çš„æ¸²æŸ“æ€§èƒ½æå‡ 300% ä»¥ä¸Šï¼ˆå®æµ‹æ•°æ®ï¼‰ã€‚